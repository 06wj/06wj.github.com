(function(){var b=window.Quark=window.Quark||{version:"1.0.0"};if(window.Q==void 0)window.Q=b;(function(a){var d=a.ua=navigator.userAgent;document.createElement("quark");a.isWebKit=/webkit/i.test(d);a.isMozilla=/mozilla/i.test(d);a.isIE=/msie/i.test(d);a.isFirefox=/firefox/i.test(d);a.isChrome=/chrome/i.test(d);a.isSafari=/safari/i.test(d)&&!this.isChrome;a.isMobile=/mobile/i.test(d);a.isOpera=/opera/i.test(d);a.isIOS=/ios/i.test(d);a.isIpad=/ipad/i.test(d);a.isIpod=/ipod/i.test(d);a.isIphone=/iphone/i.test(d)&&
!this.isIpod;a.isAndroid=/android/i.test(d);a.supportStorage="localStorage"in window;a.supportOrient="orientation"in window;a.supportTouch="ontouchstart"in document;a.cssPrefix=a.isWebKit?"webkit":a.isFirefox?"Moz":a.isOpera?"O":a.isIE?"ms":""})(b);b.RADIAN=Math.PI/180;b.emptyFunction=function(){};var a=function(){};b.inherit=function(c,d){a.prototype=d.prototype;c.superClass=d.prototype;c.prototype=new a;c.prototype.constructor=c};b.merge=function(a,d,e){for(var f in d)if(!e||a.hasOwnProperty(f))a[f]=
d[f];return a};b.delegate=function(a,d){var e=d||window;if(arguments.length>2){var f=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.concat.apply(f,arguments);return a.apply(e,d)}}else return function(){return a.apply(e,arguments)}};b.getDOM=function(a){return document.getElementById(a)};b.createDOM=function(a,d){var e=document.createElement(a),f;for(f in d){var b=d[f];if(f=="style")for(var i in b)e.style[i]=b[i];else e[f]=b}return e};b.toString=function(){return"Quark"};
window.trace=function(){var a=Array.prototype.slice.call(arguments);typeof console!="undefined"&&typeof console.log!="undefined"&&console.log(a.join(" "))}})();(function(){var b=Quark.Matrix=function(a,c,d,e,f,b){this.a=a;this.b=c;this.c=d;this.d=e;this.tx=f;this.ty=b};b.prototype.concat=function(a){var c=this.a,d=this.c,e=this.tx;this.a=c*a.a+this.b*a.c;this.b=c*a.b+this.b*a.d;this.c=d*a.a+this.d*a.c;this.d=d*a.b+this.d*a.d;this.tx=e*a.a+this.ty*a.c+a.tx;this.ty=e*a.b+this.ty*a.d+a.ty;return this};b.prototype.rotate=function(a){var c=Math.cos(a),a=Math.sin(a),d=this.a,e=this.c,f=this.tx;this.a=d*c-this.b*a;this.b=d*a+this.b*c;this.c=e*c-this.d*a;this.d=
e*a+this.d*c;this.tx=f*c-this.ty*a;this.ty=f*a+this.ty*c;return this};b.prototype.scale=function(a,c){this.a*=a;this.d*=c;this.tx*=a;this.ty*=c;return this};b.prototype.translate=function(a,c){this.tx+=a;this.ty+=c;return this};b.prototype.identity=function(){this.a=this.d=1;this.b=this.c=this.tx=this.ty=0;return this};b.prototype.invert=function(){var a=this.a,c=this.b,d=this.c,e=this.d,f=this.tx,b=a*e-c*d;this.a=e/b;this.b=-c/b;this.c=-d/b;this.d=a/b;this.tx=(d*this.ty-e*f)/b;this.ty=-(a*this.ty-
c*f)/b;return this};b.prototype.clone=function(){return new b(this.a,this.b,this.c,this.d,this.tx,this.ty)};b.prototype.toString=function(){return"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"}})();(function(){var b=Quark.Rectangle=function(a,c,d,e){this.x=a;this.y=c;this.width=d;this.height=e};b.prototype.intersects=function(a){return this.x<=a.x+a.width&&a.x<=this.x+this.width&&this.y<=a.y+a.height&&a.y<=this.y+this.height};b.prototype.intersection=function(a){var c=Math.max(this.x,a.x),d=Math.min(this.x+this.width,a.x+a.width);if(c<=d){var e=Math.max(this.y,a.y),a=Math.min(this.y+this.height,a.y+a.height);if(e<=a)return new b(c,e,d-c,a-e)}return null};b.prototype.union=function(a,c){var d=
Math.min(this.x,a.x),e=Math.min(this.y,a.y),f=Math.max(this.x+this.width,a.x+a.width)-d,g=Math.max(this.y+this.height,a.y+a.height)-e;if(c)return new b(d,e,f,g);else this.x=d,this.y=e,this.width=f,this.height=g};b.prototype.containsPoint=function(a,c){return this.x<=a&&a<=this.x+this.width&&this.y<=c&&c<=this.y+this.height};b.prototype.clone=function(){return new b(this.x,this.y,this.width,this.height)};b.prototype.toString=function(){return"(x="+this.x+", y="+this.y+", width="+this.width+", height="+
this.height+")"}})();(function(){Quark.KEY={MOUSE_LEFT:1,MOUSE_MID:2,MOUSE_RIGHT:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,
CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123}})();(function(){var b=Quark.EventManager=function(){this.keyState={}};b.prototype.register=function(a,c,d,e,f){var b=Quark.getElementOffset(a);b.prevent=e;b.stop=f;for(var i=this,e=function(a){i._onEvent(a,b,d)},f=0;f<c.length;f++)a.addEventListener(c[f],e,!1)};b.prototype._onEvent=function(a,c,d){var e=a.type,b=c.left,g=c.top,i=0,h=0;switch(e){case "keydown":case "keyup":case "keypress":this.keyState[a.keyCode]=e;break;case "mousedown":case "mousemove":case "mouseup":i=a.clientX-b;h=a.clientY-g;break;
case "touchstart":case "touchmove":e=a.touches[0];i=e.clientX-b;h=e.clientY-g;break;case "touchend":e=a.changedTouches[0],i=e.clientX-b,h=e.clientY-g}a.eventX=i;a.eventY=h;a.timeStamp=Date.now();d!=null&&d(a);c.prevent&&a.preventDefault();c.stop&&a.stopPropagation()};b.stop=function(a,c,d){c||a.preventDefault();d||a.stopPropagation()}})();(function(){var b=Quark.EventDispatcher=function(){this._eventMap={}};b.prototype.addEventListener=function(a,c){var d=this._eventMap[a];d==null&&(d=this._eventMap[a]=[]);return d.indexOf(c)==-1?(d.push(c),!0):!1};b.prototype.removeEventListener=function(a,c){var d=this._eventMap[a];if(d==null)return!1;for(var b=0;b<d.length;b++)if(d[b]===c)return d.splice(b,1),d.length==0&&delete this._eventMap[a],!0;return!1};b.prototype.removeEventListenerByType=function(a){return this._eventMap[a]!=null?(delete this._eventMap[a],
!0):!1};b.prototype.removeAllEventListeners=function(){this._eventMap={}};b.prototype.dispatchEvent=function(a){var c=this._eventMap[a.type];if(c==null)return!1;if(!a.target)a.target=this;for(var d=0;d<c.length;d++){var b=c[d];typeof b=="function"&&b.call(this,a)}return!0};b.prototype.hasEventListener=function(a){a=this._eventMap[a];return a!=null&&a.length>0}})();(function(){var b=Quark.UIDUtil={_counter:0};b.createUID=function(a){var c=a.charCodeAt(a.length-1);c>=48&&c<=57&&(a+="_");return a+this._counter++};b.displayObjectToString=function(a){for(var c;a!=null;a=a.parent){var d=a.id!=null?a.id:a.name;c=c==null?d:d+"."+c;if(a==a.parent)break}return c}})();(function(){function b(a,d){for(var c=0;c<a.children.length;c++){var i=a.children[c];if(i.children)b(i,d);else if(d!=null){var h=i.getBounds();if(i._rotatedPoints!=null){d.globalAlpha=0.2;d.beginPath();var k=i._rotatedPoints[0];d.moveTo(k.x-0.5,k.y-0.5);for(var j=1;j<i._rotatedPoints.length;j++){var l=i._rotatedPoints[j];d.lineTo(l.x-0.5,l.y-0.5)}d.lineTo(k.x-0.5,k.y-0.5);d.stroke();d.closePath();d.globalAlpha=0.5}d.beginPath();d.rect((h.x>>0)-0.5,(h.y>>0)-0.5,h.width>>0,h.height>>0);d.stroke();d.closePath()}else if(i.drawable.domDrawable)i.drawable.domDrawable.style.border=
"1px solid #f00"}}Quark.getUrlParams=function(){var e;var a={},d=window.location.href,c=d.indexOf("?");if(c>0)for(var d=d.substring(c+1).split("&"),c=0,b;b=d[c];c++)e=d[c]=b.split("="),b=e,a[b[0]]=b.length>1?b[1]:!0;return a};Quark.getElementOffset=function(a){for(var d=a.offsetLeft,c=a.offsetTop;(a=a.offsetParent)&&a!=document.body&&a!=document;)d+=a.offsetLeft,c+=a.offsetTop;return{left:d,top:c}};Quark.createDOMDrawable=function(a,d){var c=a.tagName||"div",b=d.image||d.rawDrawable||d.drawable,h=
a.width||b&&b.width,k=a.height||b&&b.height,j=Quark.createDOM(c);if(a.id)j.id=a.id;j.style.position="absolute";j.style.left=(a.left||0)+"px";j.style.top=(a.top||0)+"px";j.style.width=h+"px";j.style.height=k+"px";if(c=="canvas"){if(j.width=h,j.height=k,b!=null){c=j.getContext("2d");if(d.rect==null)d.rect=[0,0,h,k];h=d.rect;c.drawImage(b,h[0],h[1],h[2],h[3],d.x||0,d.y||0,d.width||h[2],d.height||h[3])}}else{j.style.opacity=a.alpha!=void 0?a.alpha:1;j.style.overflow="hidden";if(window.$debug)j.style.border=
"1px solid red";if(b&&b.src)j.style.backgroundImage="url("+b.src+")",j.style.backgroundPosition=-(a.rectX||0)+"px "+-(a.rectY||0)+"px"}return j};var a=document.head,c=a.getElementsByTagName("meta"),d=c.length>0?c[c.length-1].nextSibling:a.childNodes[0];Quark.addMeta=function(c){var b=document.createElement("meta"),g;for(g in c)b.setAttribute(g,c[g]);a.insertBefore(b,d)};Quark.toggleDebugRect=function(a){a.paused=!a.paused;if(a.paused){var d=a.context;a._update(d);d=d.context;if(d!=null)d.save(),d.lineWidth=
1,d.strokeStyle="#f00",d.globalAlpha=0.5;b(a,d);d!=null&&d.restore()}}})();(function(){var b=Quark.Timer=function(a){this.interval=a||50;this.paused=!1;this.info={lastTime:0,currentTime:0,deltaTime:0};this._startTime=0;this._intervalID=null;this._listeners=[]};b.prototype.start=function(){if(this._intervalID==null){this._startTime=this.info.lastTime=this.info.currentTime=Date.now();var a=this,c=function(){a._intervalID=setTimeout(c,a.interval);a._run()};c()}};b.prototype.stop=function(){clearInterval(this._intervalID);this._intervalID=null;this._startTime=0};b.prototype._run=
function(){if(!this.paused){var a=this.info,c=a.currentTime=Date.now();a.deltaTime=c-a.lastTime;for(var d=0,b=this._listeners.length,f,g;d<b;d++)f=this._listeners[d],g=f.__runTime||0,g==0?f.step(this.info):c>g&&(f.step(this.info),this._listeners.splice(d,1),d--,b--);a.lastTime=c}};b.prototype.delay=function(a,c){this.addListener({step:a,__runTime:Date.now()+c})};b.prototype.addListener=function(a){if(a==null||typeof a.step!="function")throw"Timer Error: The listener object must implement a step() method!";
this._listeners.push(a)};b.prototype.removeListener=function(a){a=this._listeners.indexOf(a);a>-1&&this._listeners.splice(a,1)}})();(function(){var b=Quark.ImageLoader=function(a){b.superClass.constructor.call(this);this.isLoading=!1;this._index=-1;this._loaded=0;this._images={};this._totalSize=0;a&&this._addSource(a)};Quark.inherit(b,Quark.EventDispatcher);var a=Quark.delegate;b.prototype.load=function(a){a&&this._addSource(a);this.isLoading||this._loadNext()};b.prototype._addSource=function(a){for(var a=a instanceof Array?a:[a],d=0;d<a.length;d++)this._totalSize+=a[d].size||0;this._source=this._source?this._source.concat(a):
a};b.prototype._loadNext=function(){this._index++;if(this._index>=this._source.length)this.dispatchEvent({type:"complete",target:this,images:this._images}),this._source=[],this.isLoading=!1,this._index=-1;else{var c=new Image;c.onload=a(this._loadHandler,this);c.src=this._source[this._index].src;this.isLoading=!0}};b.prototype._loadHandler=function(a){this._loaded++;var d=this._source[this._index];d.image=a.target;this._images[d.id||d.src]=d;this.dispatchEvent({type:"loaded",target:this,image:d});
this._loadNext()};b.prototype.getLoaded=function(){return this._loaded};b.prototype.getTotal=function(){return this._source.length};b.prototype.getLoadedSize=function(){var a=0,d;for(d in this._images)a+=this._images[d].size||0;return a};b.prototype.getTotalSize=function(){return this._totalSize}})();(function(){(Quark.Drawable=function(b,a){this.rawDrawable=b;this.domDrawable=a||null}).prototype.get=function(b,a){if(a==null||a.canvas.getContext!=null)return this.rawDrawable;else{if(this.domDrawable==null)this.domDrawable=Quark.createDOMDrawable(b,{image:this.rawDrawable});return this.domDrawable}}})();(function(){function b(a){for(var c=new Quark.Matrix(1,0,0,1,0,0);a.parent!=null;a=a.parent){var b=1,g=0;a.rotation%360!=0&&(g=a.rotation*Quark.RADIAN,b=Math.cos(g),g=Math.sin(g));a.regX!=0&&(c.tx-=a.regX);a.regY!=0&&(c.ty-=a.regY);c.concat(new Quark.Matrix(b*a.scaleX,g*a.scaleX,-g*a.scaleY,b*a.scaleY,a.x,a.y))}return c}function a(a,c,b,g){return{x:(c.x-a.x)*g-(c.y-a.y)*b+a.x+0.5>>0,y:(c.y-a.y)*g+(c.x-a.x)*b+a.y+0.5>>0}}var c=Quark.DisplayObject=function(a){this.id=Quark.UIDUtil.createUID("DisplayObject");
this.name=null;this.height=this.width=this.regY=this.regX=this.y=this.x=0;this.scaleY=this.scaleX=this.alpha=1;this.rotation=0;this.eventEnabled=this.visible=!0;this.context=this.parent=this.drawable=null;this._depth=0;this._lastState={};this._stateList=["x","y","regX","regY","width","height","alpha","scaleX","scaleY","rotation","visible","_depth"];Quark.merge(this,a)};c.prototype.setDrawable=function(a){if(this.drawable==null||this.drawable.rawDrawable!=a)this.drawable=new Quark.Drawable(a)};c.prototype.getDrawable=
function(a){return this.drawable&&this.drawable.get(this,a)};c.prototype._update=function(a){this.update(a)};c.prototype.update=function(){};c.prototype._render=function(a){var c=this.context||a,b=c.canvas.getContext!=null;!c||!this.visible||this.alpha<=0?b||a.hide(this):(b&&c.save(),c.transform(this),this.render(c),b&&c.restore());this.saveState()};c.prototype.render=function(a){a.draw(this,this.x,this.y,this.width,this.height,0,0,this.width,this.height)};c.prototype.saveState=function(a){for(var a=
a||this._stateList,c=this._lastState,b=0,g=a.length;b<g;b++){var i=a[b];c["last"+i]=this[i]}};c.prototype.getState=function(a){return this._lastState["last"+a]};c.prototype.propChanged=function(){for(var a=arguments.length>0?arguments:this._stateList,c=0,b=a.length;c<b;c++){var g=a[c];if(this._lastState["last"+g]!=this[g])return!0}return!1};c.prototype.hitTestPoint=function(a,c,b){return!b?(b=this.getBounds(),a>=b.x&&a<=b.x+b.width&&c>=b.y&&c<=b.y+b.height):!1};c.prototype.hitTestObject=function(a,
c){var b=this.getBounds(),g=a.getBounds();return!c?b.x<=g.x+g.width&&g.x<=b.x+b.width&&b.y<=g.y+g.height&&g.y<=b.y+b.height:!1};c.prototype.localToGlobal=function(a,c){var f=b(this);return{x:f.tx+a,y:f.ty+c}};c.prototype.globalToLocal=function(a,c){var f=b(this).invert();return{x:f.tx+a,y:f.ty+c}};c.prototype.localToTarget=function(a,c,b){a=this.localToGlobal(a,c);return b.globalToLocal(a.x,a.y)};c.prototype.getBounds=function(c){var c=c==null?this.localToGlobal(0,0):this.localToTarget(0,0,c),b=this.x,
f=this.y,g=this.regX,i=this.regY,h=this.getCurrentWidth(),k=this.getCurrentHeight();if(this.rotation%360!=0){var c=this.rotation*Quark.RADIAN,j=Math.sin(c),l=Math.cos(c),n={x:b,y:f},c=a(n,{x:b-g,y:f-i},j,l),m=a(n,{x:b-g+h,y:f-i},j,l),h=a(n,{x:b-g+h,y:f-i+k},j,l),b=a(n,{x:b-g,y:f-i+k},j,l);this._rotatedPoints=[c,m,h,b];f=Math.min(c.x,m.x,h.x,b.x);g=Math.min(c.y,m.y,h.y,b.y);return{x:f,y:g,width:Math.max(c.x,m.x,h.x,b.x)-f,height:Math.max(c.y,m.y,h.y,b.y)-g}}return{x:c.x,y:c.y,width:h,height:k}};c.prototype.getCurrentWidth=
function(){return Math.abs(this.width*this.scaleX)};c.prototype.getCurrentHeight=function(){return Math.abs(this.height*this.scaleY)};c.prototype.getStage=function(){for(var a=this;a.parent;)a=a.parent;return a instanceof Quark.Stage?a:null};c.prototype.toString=function(){return this.id||this.name}})();(function(){var b=Quark.DisplayObjectContainer=function(a){this.eventChildren=!0;this.autoSize=!1;a=a||{};b.superClass.constructor.call(this,a);this.id=a.id||Quark.UIDUtil.createUID("DisplayObjectContainer");this.setDrawable(a.drawable||a.image||null);this.children=[];if(a.children)for(var c=0;c<a.children.length;c++)this.addChild(a.children[c])};Quark.inherit(b,Quark.DisplayObject);b.prototype.addChildAt=function(a,c){if(c<0)c=0;else if(c>this.children.length)c=this.children.length;var b=this.getChildIndex(a);
if(b!=-1){if(b==c)return this;this.children.splice(b,1)}else a.parent&&a.parent.removeChild(a);this.children.splice(c,0,a);a.parent=this;if(this.autoSize){var b=new Quark.Rectangle(0,0,this.rectWidth||this.width,this.rectHeight||this.height),e=new Quark.Rectangle(a.x,a.y,a.rectWidth||a.width,a.rectHeight||a.height);b.union(e);this.width=b.width;this.height=b.height}return this};b.prototype.addChild=function(a){for(var c=this.children.length,b=0;b<arguments.length;b++)a=arguments[b],this.addChildAt(a,
c+b);return this};b.prototype.removeChildAt=function(a){if(a<0||a>=this.children.length)return!1;var b=this.children[a];if(b!=null)this.getStage().context.remove(b),b.parent=null;this.children.splice(a,1);return!0};b.prototype.removeChild=function(a){return this.removeChildAt(this.children.indexOf(a))};b.prototype.removeAllChildren=function(){for(;this.children.length>0;)this.removeChildAt(0)};b.prototype.getChildAt=function(a){return a<0||a>=this.children.length?null:this.children[a]};b.prototype.getChildIndex=
function(a){return this.children.indexOf(a)};b.prototype.setChildIndex=function(a,b){if(a.parent==this){var d=this.children.indexOf(a);b!=d&&(this.children.splice(d,1),this.children.splice(b,0,a))}};b.prototype.contains=function(a){return this.getChildIndex(a)!=-1};b.prototype.getNumChildren=function(){return this.children.length};b.prototype._update=function(a){this.update(a);for(var b=0,d=this.children.length;b<d;b++){var e=this.children[b];e._depth=b;e._update(a)}};b.prototype._render=function(a){b.superClass._render.call(this,
a);for(var c=0,d=this.children.length;c<d;c++)this.children[c]._render(a)};b.prototype.getObjectUnderPoint=function(a,b,d,e,f){if(f)var g=[];for(var i=this.children.length-1;i>=0;i--){var h=this.children[i];if(!(h==null||!h.eventEnabled||!h.visible||h.alpha<=0))if(h.children!=void 0&&h.eventChildren&&h.getNumChildren()>0){var k=h.getObjectUnderPoint(a,b,d,e,f);if(k)if(f)k.length>0&&(g=g.concat(k));else return k;else if(h.hitTestPoint(a,b,d,e))if(f)g.push(h);else return h}else if(h.hitTestPoint(a,
b,d,e))if(f)g.push(h);else return h}return f?g:null}})();(function(){var b=Quark.Stage=function(a){this.stageY=this.stageX=0;this.paused=!1;this.onUpdate=null;a=a||{};b.superClass.constructor.call(this,a);this.id=a.id||Quark.UIDUtil.createUID("Stage");a=Quark.getElementOffset(this.context.canvas);this.stageX=a.left;this.stageY=a.top};Quark.inherit(b,Quark.DisplayObjectContainer);b.prototype.step=function(a){this.paused||(this._update(a),this._render(this.context))};b.prototype._update=function(a){b.superClass._update.call(this,a);if(this.onUpdate!=null)this.onUpdate(a)};
b.prototype._render=function(a){this.clear();b.superClass._render.call(this,a)};b.prototype.clear=function(a,b,d,e){arguments.length>=4?this.context.clear(a,b,d,e):this.context.clear(0,0,this.width,this.height)}})();(function(){var b=Quark.Bitmap=function(a){this.image=null;this.rectHeight=this.rectWidth=this.rectY=this.rectX=0;a=a||{};b.superClass.constructor.call(this,a);this.id=a.id||Quark.UIDUtil.createUID("Bitmap");trace(this);this.setRect(a.rect||[0,0,this.image.width,this.image.height]);this.setDrawable(this.image);this._stateList.push("rectX","rectY","rectWidth","rectHeight")};Quark.inherit(b,Quark.DisplayObject);b.prototype.setRect=function(a){this.rectX=a[0];this.rectY=a[1];this.rectWidth=this.width=
a[2];this.rectHeight=this.height=a[3]};b.prototype.render=function(a){a.draw(this,this.rectX,this.rectY,this.rectWidth,this.rectHeight,0,0,this.width,this.height)}})();(function(){var b=Quark.MovieClip=function(a){this.interval=0;this.useFrames=this.paused=!1;this.currentFrame=0;this._frames=[];this._frameLabels={};this._frameDisObj=null;this._displayedCount=0;a=a||{};b.superClass.constructor.call(this,a);this.id=a.id||Quark.UIDUtil.createUID("MovieClip")};Quark.inherit(b,Quark.Bitmap);b.prototype.addFrame=function(a){var b=this._frames.length;if(a instanceof Array)for(var d=0;d<a.length;d++)this.setFrame(a[d],b+d);else this.setFrame(a,b);return this};b.prototype.setFrame=
function(a,b){b==void 0||b>this._frames.length?b=this._frames.length:b<0&&(b=0);this._frames[b]=a;a.label&&(this._frameLabels[a.label]=a);if(a.interval==void 0)a.interval=this.interval;b==0&&this.currentFrame==0&&this.setRect(a.rect)};b.prototype.getFrame=function(a){return typeof a=="number"?this._frames[a]:this._frameLabels[a]};b.prototype.play=function(){this.paused=!1};b.prototype.stop=function(){this.paused=!0};b.prototype.gotoAndStop=function(a){this.currentFrame=this.getFrameIndex(a);this.paused=
!0};b.prototype.gotoAndPlay=function(a){this.currentFrame=this.getFrameIndex(a);this.paused=!1};b.prototype.getFrameIndex=function(a){if(typeof a=="number")return a;for(var a=this._frameLabels[a],b=this._frames,d=0;d<b.length;d++)if(a==b[d])return d;return-1};b.prototype.nextFrame=function(a){var b=this._frames[this.currentFrame];if(b.interval>0)a=this._displayedCount+a,this._displayedCount=b.interval>a?a:0;if(b.jump>=0||typeof b.jump=="string")if(this._displayedCount==0||!b.interval)return this.currentFrame=
this.getFrameIndex(b.jump);return b.interval>0&&this._displayedCount>0?this.currentFrame:this.currentFrame>=this._frames.length-1?this.currentFrame=0:++this.currentFrame};b.prototype.update=function(a){var b=this._frames[this.currentFrame];b.stop?this.stop():(this.paused||this.nextFrame(this.useFrames?1:a&&a.deltaTime),this.setRect(b.rect))};b.prototype.render=function(a){var b=this._frames[this.currentFrame].rect;a.draw(this,b[0],b[1],b[2],b[3],0,0,this.width,this.height)}})();(function(){var b=Quark.Context=function(a){if(a.canvas==null)throw"Context Error: canvas is required.";this.canvas=null;Quark.merge(this,a)};b.prototype.draw=function(){};b.prototype.transform=function(){};b.prototype.clear=function(){};b.prototype.remove=function(){}})();(function(){var b=Quark.CanvasContext=function(a){b.superClass.constructor.call(this,a);this.context=this.canvas.getContext("2d")};Quark.inherit(b,Quark.Context);b.prototype.setCanvas=function(a){this.canvas=a;this.context=this.canvas.getContext("2d")};b.prototype.draw=function(){var a=arguments[0].getDrawable(this);a!=null&&(arguments[0]=a,this.context.drawImage.apply(this.context,arguments))};b.prototype.transform=function(a){var b=this.context;(a.x!=0||a.y!=0)&&b.translate(a.x,a.y);a.rotation%
360!=0&&b.rotate(a.rotation%360*Quark.RADIAN);(a.scaleX!=1||a.scaleY!=1)&&b.scale(a.scaleX,a.scaleY);(a.regX!=0||a.regY!=0)&&b.translate(-a.regX,-a.regY);a.alpha>0&&(b.globalAlpha*=a.alpha)};b.prototype.clear=function(a,b,d,e){this.context.clearRect(a,b,d,e)};b.prototype.save=function(){this.context.save()};b.prototype.restore=function(){this.context.restore()}})();(function(){function b(a,b){var c="";c+=b?"translate3d("+(a.x-a.regX)+"px, "+(a.y-a.regY)+"px, 0px)rotate3d(0, 0, 1, "+a.rotation+"deg)scale3d("+a.scaleX+", "+a.scaleY+", 1)":"translate("+(a.x-a.regX)+"px, "+(a.y-a.regY)+"px)rotate("+a.rotation+"deg)scale("+a.scaleX+", "+a.scaleY+")";return c}var a=document.createElement("div"),c=a.style[Quark.cssPrefix+"Transform"]!=void 0,d=a.style[Quark.cssPrefix+"Perspective"]!=void 0,e=document.documentElement;if(d&&"webkitPerspective"in e.style){a.id="test3d";
var f=document.createElement("style");f.textContent="@media (-webkit-transform-3d){#test3d{height:3px}}";document.head.appendChild(f);e.appendChild(a);d=a.offsetHeight===3;f.parentNode.removeChild(f);a.parentNode.removeChild(a)}Quark.supportTransform=c;Quark.supportTransform3D=d;if(!c)throw"Error: DOMContext requires css transfrom support.";var g=Quark.DOMContext=function(a){g.superClass.constructor.call(this,a)};Quark.inherit(g,Quark.Context);g.prototype.draw=function(a){if(!a._addedToDOM){var b=
a.parent,c=a.getDrawable(this);b==null&&c.parentNode==null?this.canvas.appendChild(c):(b=b.getDrawable(this),c.parentNode!=b&&b.appendChild(c));a._addedToDOM=!0}};g.prototype.transform=function(a){var c=a.getDrawable(this),d=Quark.cssPrefix,e=d+"TransformOrigin";d+="Transform";if(a.propChanged("visible","alpha"))c.style.display=!a.visible||a.alpha<=0?"none":"";if(a.propChanged("alpha"))c.style.opacity=a.alpha;if(a.propChanged("rectX","rectY"))c.style.backgroundPosition=-a.rectX+"px "+-a.rectY+"px";
if(a.propChanged("width","height"))c.style.width=a.width+"px",c.style.height=a.height+"px";a.propChanged("regX","regY")&&(c.style[e]=a.regX+"px "+a.regY+"px");a.propChanged("x","y","regX","regY","scaleX","scaleY","rotation")&&(e=Quark.supportTransform3D?b(a,!0):b(a,!1),c.style[d]=e);if(a.propChanged("_depth"))c.style.zIndex=a._depth};g.prototype.hide=function(a){a.getDrawable(this).style.display="none"};g.prototype.remove=function(a){var b=a.getDrawable(this),c=b.parentNode;c!=null&&c.removeChild(b);
a._addedToDOM=!1}})();
